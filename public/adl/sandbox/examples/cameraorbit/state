[{"extends":"http://vwf.example.com/behavior.vwf","name":"d502542c-5410-6188-c3f8-2429492d3f22","properties":{"NotProto":"","type":"behavior","DisplayName":"CameraOrbit","owner":"Rob","buttondown":false,"lastx":914,"lasty":433,"offset":[-0.37808492571205,-2.406167280814128,0.8585375517477996],"rotx":-0.21,"roty":-0.19},"methods":{"tick":{"body":"\n\n\n\n\n\n\n\n\n                  var offset = this.offset.internal_val;\n\n                      var camTargetName = this.parent.children_by_name.Camera1.objectToLookAt;\n                      if (camTargetName)\n                      {\n                          var camTargetObject = this.Scene.findNode(camTargetName);\n                          var camTargetPos = camTargetObject.transformAPI.getWorldPosition();\n\n                          var newPos = Vec3.add(offset, camTargetPos, []);\n                          this.parent.children_by_name.Camera1.transformAPI.setPosition(newPos);\n\n                          this.parent.children_by_name.Camera1.tick();\n                      }\n","parameters":[]}},"events":{"pointerDown":{"parameters":["            eventData","            nodeData            "],"body":"           \n  if (eventData.button == 'right')\n      {\n          this.buttondown = true;\n           this.lastx = eventData.screenPosition[0];\n              this.lasty = eventData.screenPosition[1];\n      }"},"pointerUp":{"parameters":["            eventData","            nodeData            "],"body":"           \n  if (eventData.button == 'right')\n      {\n          this.buttondown = false;\n           this.lastx = eventData.screenPosition[0];\n              this.lasty = eventData.screenPosition[1];\n      }"},"pointerWheel":{"parameters":["        eventData        "],"body":"       \n  console.log(eventData);\n      var offset = this.offset.internal_val;\n      if (eventData.wheelDelta > 0)\n          offset = Vec3.scale(offset, 1.04, []);\n      else\n          offset = Vec3.scale(offset, .96, []);\n      this.offset = offset;"},"pointerMove":{"parameters":[" eventData"," nodeData "],"body":"\n  if (this.buttondown === true)\n      {\n\n          var relx = this.lastx - eventData.screenPosition[0];\n          var rely = this.lasty - eventData.screenPosition[1];\n          this.rotx = relx / 100;\n          this.roty = rely / 100;\n\n          var offset = this.offset.internal_val;\n          var offsetbak = Vec3.clone(offset);\n\n          var dot = Vec3.dot(Vec3.normalize(offset, []), [0, 0, 1]);\n          if (dot > .98 && rely > 0)\n              this.roty = 0;\n          if (dot < -.98 && rely < 0)\n              this.roty = 0;\n\n          var quatx = Quaternion.fromAngleAxis(this.rotx, [0, 0, 1], []);\n          var matx = Quaternion.toRotationMatrix4(quatx, []);\n          offset = Mat4.multVec3(matx, offset, []);\n          var cross = Vec3.cross(offset, [0, 0, 1], []);\n          cross = Vec3.normalize(cross, []);\n\n          var quaty = Quaternion.fromAngleAxis(this.roty, cross, []);\n          var maty = Quaternion.toRotationMatrix4(quaty, []);\n          offset = Mat4.multVec3(maty, offset, []);\n          this.offset = offset;\n\n          this.lastx = eventData.screenPosition[0];\n          this.lasty = eventData.screenPosition[1];\n      }"}}},{"extends":"SandboxCamera.vwf","name":"7c51b2b3-7d7c-21cf-5b6c-a159eb364672","source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","properties":{"translation":[-4.978085041046143,-9.806167602539062,1.459538459777832],"scale":[1.0000001192092896,0.9989984631538391,0.9990002512931824],"rotation":[-0.9074336290359497,0.07085902988910675,-0.4141777753829956,21.353824615478516],"owner":"Rob","DisplayName":"Camera1","transform":[0.9878789782524109,-0.15522710978984833,0,0,0.1462520956993103,0.9307611584663391,-0.3321022093296051,0,0.051551349461078644,0.3280773162841797,0.942183256149292,0,-4.978085041046143,-9.806167602539062,1.459538459777832,1],"quaternion":[-0.16812074184417725,0.01312809344381094,-0.07673495262861252,0.9826875329017639],"objectToLookAt":"cone1"},"methods":{"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n                          if (this.objectToLookAt)\n                              {\n                                  var node = this.Scene.findNode(this.objectToLookAt);\n                                  var pos = node.transformAPI.localToGlobal([0, 0, 0]);\n                                  this.transformAPI.lookat(pos, '', '-Y', 'Z');\n                              }\n","parameters":[]}}},{"extends":"sphere2.vwf","name":"7635b316-164b-715a-ef51-444bf025540f","source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","properties":{"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":1,"g":1,"b":1},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"morphTargets":false,"skinning":false,"type":"phong"},"size":[0.5,1,1],"translation":[4.600000381469727,-7.799997329711914,0.8009994626045227],"scale":[1,1,1],"rotation":[1,0,0,0],"owner":"Rob","texture":"checker.jpg","type":"Primitive","tempid":"","DisplayName":"sphere1","transform":[1,0,0,0,0,1,0,0,0,0,1,0,4.600000381469727,-7.799997329711914,0.8009994626045227,1],"quaternion":[0,0,0,1]},"events":{"pointerClick":{"parameters":["             eventData","             nodeData             "],"body":"            \n  this.Scene.children_by_name.Camera1.objectToLookAt = this.DisplayName;"}}},{"extends":"cone2.vwf","name":"96b0bf0-3ff4-eac8-7f9c-df9257e6567c","source":"vwf/model/threejs/cone.js","type":"subDriver/threejs","properties":{"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":1,"g":1,"b":1},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"morphTargets":false,"skinning":false,"type":"phong"},"size":[0.5,1,0.5],"translation":[-4.599999904632568,-7.40000057220459,0.601000964641571],"scale":[1,1,1],"rotation":[1,0,0,0],"owner":"Rob","texture":"checker.jpg","type":"Primitive","tempid":"","DisplayName":"cone1","transform":[1,0,0,0,0,1,0,0,0,0,1,0,-4.599999904632568,-7.40000057220459,0.601000964641571,1],"quaternion":[0,0,0,1]},"events":{"pointerClick":{"parameters":["         eventData","         nodeData         "],"body":"        \n  this.Scene.children_by_name.Camera1.objectToLookAt = this.DisplayName;\n      return true;"},"pointerMove":{"parameters":["         eventData","         nodeData         "],"body":"        \n  return false;"}}},{"extends":"http://vwf.example.com/button.vwf","name":"e8af389-49f6-841d-2e9c-11f2f7b1f611","properties":{"width":100,"height":26,"text":"Cone","left":0,"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,16,67,0,1],"owner":"Rob","DisplayName":"Button1"},"events":{"pointerClick":{"parameters":["             eventData","             nodeData             "],"body":"            \n  this.Scene.children_by_name.Camera1.objectToLookAt = this.Scene.children_by_name.cone1.DisplayName;"}}},{"extends":"box2.vwf","name":"ee38fea5-81f0-12f0-e12b-4392571a49b1","source":"vwf/model/threejs/box.js","type":"subDriver/threejs","properties":{"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":1,"g":1,"b":1},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"morphTargets":false,"skinning":false,"type":"phong"},"size":[1,1,1],"translation":[-0.19999925792217255,-7.199998378753662,0.6010000109672546],"scale":[1.0000227689743042,1.0000227689743042,1],"rotation":[0,0,-1,88.65520477294922],"owner":"Rob","texture":"checker.jpg","type":"Primitive","tempid":"","DisplayName":"box3","transform":[0.023469358682632446,-0.9997473359107971,0,0,0.9997473359107971,0.023469358682632446,0,0,0,0,1,0,-0.19999925792217255,-7.199998378753662,0.6010000109672546,1],"quaternion":[0,0,-0.6987600326538086,0.715356171131134]},"events":{"pointerClick":{"parameters":["             eventData","             nodeData             "],"body":"            \n  this.Scene.children_by_name.Camera1.objectToLookAt = this.DisplayName;console.log(\"got here\");"}},"children":{"a911d405-e808-5e25-2fb7-ef97b6846d1":{"extends":"box2.vwf","name":"a911d405-e808-5e25-2fb7-ef97b6846d1","source":"vwf/model/threejs/box.js","type":"subDriver/threejs","properties":{"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":1,"g":1,"b":1},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"morphTargets":false,"skinning":false,"type":"phong"},"size":[1,1,1],"owner":"Rob","texture":"checker.jpg","type":"Primitive","tempid":"","DisplayName":"box3B","transform":[0.25,0,0,0,0,0.25,0,0,0,0,0.25,0,-2.0000007152557373,0.7999987602233887,0.6000005602836609,1],"scale":[0.25,0.25,0.25],"translation":[-2.0000007152557373,0.7999987602233887,0.6000005602836609]},"events":{"pointerClick":{"parameters":["             eventData","             nodeData             "],"body":"            \n  this.Scene.children_by_name.Camera1.objectToLookAt = this.DisplayName;"}}},"6af9d30d-b0c0-7398-25e0-9a1bebca8881":{"extends":"rotator.vwf","name":"6af9d30d-b0c0-7398-25e0-9a1bebca8881","properties":{"owner":"Rob","type":"behavior","DisplayName":"rotator1"}}}},{"DisplayName":null,"placemarks":{"Origin":[0,0,0]},"navmode":"none","sunColor":[1,1,1],"sunDirection":[0.5,0.5,1],"sunIntensity":0.8,"ambientColor":[0.35,0.35,0.35],"fogColor":[0.8117647058823529,0.7803921568627451,0.7803921568627451],"fogNear":100,"fogFar":1000,"fogType":"exp","fogDensity":0.005,"fogVFalloff":1.3,"fogVFalloffStart":0,"skyColorBlend":0.32,"skyFogBlend":0.34,"skyApexColor":[0.24313725490196078,0.3843137254901961,0.7098039215686275],"skyHorizonColor":[0.2901960784313726,0.2901960784313726,0.2901960784313726],"vAtmosphereDensity":0.0005,"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":0.8,"g":0.8,"b":0.8},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":false,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":27.77777777777778,"scaley":27.77777777777778,"src":"/adl/sandbox/puT0BaKyNzzyoZdk//vwfDataManager.svc/texture?UID=concrete.jpg"}],"type":"phong"},"owner":"Rob","type":"scene","permission":{"Everyone":0,"Aeon Mills":1},"skyAtmosphereDensity":0.35}]